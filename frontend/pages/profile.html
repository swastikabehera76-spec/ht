<div class="max-w-6xl mx-auto p-6">

  <!-- HEADER -->
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-3xl font-bold text-black">User Profile</h1>
    <a href="/report" data-link
      class="text-sm text-blue-600 hover:text-blue-800 underline">
      ← Back to Report
    </a>
  </div>

  <!-- BASIC DETAILS CARD -->
  <div class="bg-white p-6 rounded-lg shadow mb-8">

    <div class="flex items-center justify-between mb-4">
      <h2 class="font-semibold text-black text-lg">Basic Details</h2>
      <button id="profileExportPdfBtn"
        class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
        Export PDF
      </button>
    </div>

    <!-- LOADING -->
    <div id="basicLoading" class="text-center py-6">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
      <p class="text-gray-600 mt-2">Loading profile...</p>
    </div>

    <!-- DETAILS GRID -->
    <div id="basicDetails"
      class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">

      <div class="border rounded-lg p-4">
        <p class="text-xs text-gray-500">User ID</p>
        <p id="userId" class="font-semibold text-black">—</p>
      </div>

      <div class="border rounded-lg p-4">
        <p class="text-xs text-gray-500">Name</p>
        <p id="userName" class="font-semibold text-black">—</p>
      </div>

      <div class="border rounded-lg p-4">
        <p class="text-xs text-gray-500">Age</p>
        <p id="userAge" class="font-semibold text-black">—</p>
      </div>

      <div class="border rounded-lg p-4">
        <p class="text-xs text-gray-500">Height (cm)</p>
        <p id="userHeight" class="font-semibold text-black">—</p>
      </div>

      <div class="border rounded-lg p-4">
        <p class="text-xs text-gray-500">Weight (kg)</p>
        <p id="userWeight" class="font-semibold text-black">—</p>
      </div>

      <div class="border rounded-lg p-4">
        <p class="text-xs text-gray-500">Gender</p>
        <p id="userGender" class="font-semibold text-black">—</p>
      </div>
    </div>
  </div>

  <!-- ACTIVITY RECORDS -->
  <div class="bg-white rounded-lg shadow mb-8 overflow-x-auto">

    <div class="px-6 py-4 border-b flex items-center justify-between">
      <h2 class="font-semibold text-black">Activity Records</h2>
      <button id="activityExportCsvBtn"
        class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg text-sm">
        Export CSV
      </button>
    </div>

    <div id="activityLoading" class="text-center py-6">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
    </div>

    <div id="activityTableContainer" class="hidden">
      <p id="totalActivities" class="text-sm text-gray-600 px-6 py-3">
        Total: 0
      </p>

      <table class="min-w-full divide-y divide-gray-200 text-black">
        <thead class="bg-gray-800 text-white">
          <tr>
            <th class="px-4 py-3 text-left text-xs uppercase">Activity ID</th>
            <th class="px-4 py-3 text-left text-xs uppercase">Steps</th>
            <th class="px-4 py-3 text-left text-xs uppercase">Water (L)</th>
            <th class="px-4 py-3 text-left text-xs uppercase">Calories</th>
          </tr>
        </thead>
        <tbody id="activityTableBody" class="divide-y divide-gray-200"></tbody>
      </table>

      <p id="noActivities" class="text-center text-gray-500 py-6 hidden">
        No activity records found.
      </p>
    </div>
  </div>

  <!-- MEDICAL RECORDS -->
  <div class="bg-white rounded-lg shadow overflow-x-auto">

    <div class="px-6 py-4 border-b flex items-center justify-between">
      <h2 class="font-semibold text-black">Medical Records</h2>
      <button id="medicalExportCsvBtn"
        class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg text-sm">
        Export CSV
      </button>
    </div>

    <div id="medicalLoading" class="text-center py-6">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
    </div>

    <div id="medicalTableContainer" class="hidden">
      <p id="totalMedical" class="text-sm text-gray-600 px-6 py-3">
        Total: 0
      </p>

      <table class="min-w-full divide-y divide-gray-200 text-black">
        <thead class="bg-gray-800 text-white">
          <tr>
            <th class="px-4 py-3 text-left text-xs uppercase">Record ID</th>
            <th class="px-4 py-3 text-left text-xs uppercase">Disease</th>
            <th class="px-4 py-3 text-left text-xs uppercase">Genetic</th>
            <th class="px-4 py-3 text-left text-xs uppercase">Allergies</th>
          </tr>
        </thead>
        <tbody id="medicalTableBody" class="divide-y divide-gray-200"></tbody>
      </table>

      <p id="noMedical" class="text-center text-gray-500 py-6 hidden">
        No medical records found.
      </p>
    </div>
  </div>

  <!-- ERROR -->
  <div id="errorMessage"
    class="hidden mt-6 bg-red-50 border border-red-400 text-red-700 px-5 py-4 rounded-lg">
    <strong>Error:</strong>
    <span id="errorText">Unable to load user profile.</span>
  </div>

</div>

<div class="max-w-6xl mx-auto p-6">

  <!-- HEADER -->
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-3xl font-bold text-black">Health Report</h1>
    <a href="/home" data-link
      class="text-sm text-blue-600 hover:text-blue-800 underline">
      ‚Üê Back to Home
    </a>
  </div>

  <!-- CONTROLS CARD -->
  <div class="bg-white p-6 rounded-lg shadow mb-8">

    <div class="grid lg:grid-cols-4 gap-4 items-end">

      <!-- SEARCH -->
      <div class="lg:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Search</label>
        <input
          id="searchInput"
          type="text"
          placeholder="Search by User ID, Name, Disease..."
          class="w-full border border-gray-300 rounded-lg px-4 py-2
                 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- SORT BY -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Sort By</label>
        <select id="sortBy"
          class="w-full border border-gray-300 rounded-lg px-3 py-2
                 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="user_id">User ID</option>
          <option value="name">Name</option>
          <option value="age">Age</option>
          <option value="steps">Steps</option>
          <option value="calories_burned">Calories</option>
        </select>
      </div>

      <!-- SORT DIR -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Order</label>
        <select id="sortDir"
          class="w-full border border-gray-300 rounded-lg px-3 py-2
                 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="asc">Ascending</option>
          <option value="desc">Descending</option>
        </select>
      </div>

    </div>

    <!-- EXPORT + RESULT -->
    <div class="flex flex-wrap items-center justify-between mt-4 gap-3">
      <span id="resultCount" class="text-sm text-gray-600">
        Showing all records
      </span>

      <div class="flex gap-2">
        <button id="exportCsvBtn"
          class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg text-sm">
          Export CSV
        </button>
        <button id="exportPdfBtn"
          class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
          Export PDF
        </button>
      </div>
    </div>

  </div>

  <!-- LOADING -->
  <div id="loadingSpinner" class="text-center py-8">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"></div>
    <p class="text-gray-600 mt-2">Loading report...</p>
  </div>

  <!-- REPORT TABLE -->
  <div id="reportTableContainer" class="bg-white rounded-lg shadow hidden overflow-x-auto">

    <div class="px-6 py-4 border-b">
      <h2 class="font-semibold text-black">Complete Health Overview</h2>
    </div>

    <table class="min-w-full divide-y divide-gray-200 text-black">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="px-4 py-3 text-left text-xs uppercase">User ID</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Name</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Age</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Height</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Weight</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Gender</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Steps</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Water</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Calories</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Disease</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Genetic</th>
          <th class="px-4 py-3 text-left text-xs uppercase">Allergies</th>
        </tr>
      </thead>

      <tbody id="reportTableBody" class="divide-y divide-gray-200">
        <!-- JS rows -->
      </tbody>
    </table>

    <p id="noRows" class="text-center text-gray-500 py-6 hidden">
      No health records found.
    </p>

  </div>

</div>
